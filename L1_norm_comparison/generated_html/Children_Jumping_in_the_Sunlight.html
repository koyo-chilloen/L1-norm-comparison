<!DOCTYPE html>
<html>
<head>
    <title>Vector Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1 style="font-family:Arial; text-align: center;">Children Jumping in the Sunlight</h1>
    <canvas id="vectorChart" width="400" height="200"></canvas>
    <script>
        /**
         * 주어진 배열을 L1 Norm으로 정규화합니다.
         * @param {number[]} array - 정규화할 숫자 배열
         * @returns {number[]} - L1 Norm 정규화된 새 배열
         */
        function l1Normalize(array) {
            // 1. 배열 모든 요소의 절댓값의 합(L1 Norm)을 계산합니다.
            const l1Norm = array.reduce((accumulator, value) => accumulator + Math.abs(value), 0);

            // 2. L1 Norm이 0이면 0으로 나누는 오류를 방지하기 위해 원본 배열을 반환합니다.
            if (l1Norm === 0) {
                return array;
            }

            // 3. 각 요소를 L1 Norm으로 나누어 새로운 배열을 만듭니다.
            const normalizedArray = array.map(value => value / l1Norm);

            return normalizedArray;
        }

        const v = [0.0016165388049557805, 0.006181539827957749, 0.00037129453558009117, 0.0010736119438661262, 0.0005350080697098747, 0.9905954599380493, 0.0014053960796445609, 0.00011105963785666973, 0.00042919631814584134, 0.00017306190711678936, 0.0001552474783238722, 0.010319947265088558, 0.0007327128667384386, 7.544589835788429e-05, 0.009341105748899282, 0.00014260298794397386, 0.0015991352964192628, 0.00030524023368343477, 0.008028249512426556, 0.015967439208179713, 0.0003838564207399031, 0.06310538649559021, 0.010113141080364586]
        const u = l1Normalize(v);
        const sumOfAbs = u.reduce((acc, value) => acc + Math.abs(value), 0);
        console.log(sumOfAbs);
        const keywords = [
            "afro", "ambient", "arab", "asian", "blues", "childrenJingle", "classical", 
            "electronicDance", "folkCountry", "funkSoul", "indian", "jazz", "latin", 
            "metal", "pop", "rapHipHop", "reggae", "rnb", "rock", "singerSongwriters", 
            "sound", "soundtrack", "spokenWord"
        ];

        const ctx = document.getElementById('vectorChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: keywords,
                datasets: [{
                    label: 'Vector v',
                    data: v,
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                }, {
                    label: 'Vector u (Normalized v)',
                    data: u,
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        min: 0,
                        max: 1
                    }
                }
            }
        });
    </script>
</body>
</html>