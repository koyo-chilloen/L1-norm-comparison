<!DOCTYPE html>
<html>
<head>
    <title>Vector Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1 style="font-family:Arial; text-align: center;">JS-Don't Ever Leave Me</h1>
    <canvas id="vectorChart" width="400" height="200"></canvas>
    <script>
        /**
         * 주어진 배열을 L1 Norm으로 정규화합니다.
         * @param {number[]} array - 정규화할 숫자 배열
         * @returns {number[]} - L1 Norm 정규화된 새 배열
         */
        function l1Normalize(array) {
            // 1. 배열 모든 요소의 절댓값의 합(L1 Norm)을 계산합니다.
            const l1Norm = array.reduce((accumulator, value) => accumulator + Math.abs(value), 0);

            // 2. L1 Norm이 0이면 0으로 나누는 오류를 방지하기 위해 원본 배열을 반환합니다.
            if (l1Norm === 0) {
                return array;
            }

            // 3. 각 요소를 L1 Norm으로 나누어 새로운 배열을 만듭니다.
            const normalizedArray = array.map(value => value / l1Norm);

            return normalizedArray;
        }

        const v = [0.014734471268537972, 0.02087906717012326, 0.0021940584022862217, 0.00947719768414067, 0.0011053480540997246, 0.034458447661664754, 0.499336580435435, 0.0011001834354829043, 0.0015677637711632997, 0.0016132906570823656, 0.0005002537501342078, 0.2084996203581492, 0.0069982388781176675, 6.760907460072e-05, 0.011773845698270533, 0.0009315188411468019, 0.002803038327126867, 0.006520742472882072, 0.00362253835838702, 0.007307784890549051, 0.002466651549588682, 0.060772221328483686, 0.001256157456535018]
        const u = l1Normalize(v);
        const sumOfAbs = u.reduce((acc, value) => acc + Math.abs(value), 0);
        console.log(sumOfAbs);
        const keywords = [
            "afro", "ambient", "arab", "asian", "blues", "childrenJingle", "classical", 
            "electronicDance", "folkCountry", "funkSoul", "indian", "jazz", "latin", 
            "metal", "pop", "rapHipHop", "reggae", "rnb", "rock", "singerSongwriters", 
            "sound", "soundtrack", "spokenWord"
        ];

        const ctx = document.getElementById('vectorChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: keywords,
                datasets: [{
                    label: 'Vector v',
                    data: v,
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                }, {
                    label: 'Vector u (Normalized v)',
                    data: u,
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        min: 0,
                        max: 1
                    }
                }
            }
        });
    </script>
</body>
</html>