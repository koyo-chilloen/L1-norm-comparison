<!DOCTYPE html>
<html>
<head>
    <title>Vector Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1 style="font-family:Arial; text-align: center;">Neon Pulse</h1>
    <canvas id="vectorChart" width="400" height="200"></canvas>
    <script>
        /**
         * 주어진 배열을 L1 Norm으로 정규화합니다.
         * @param {number[]} array - 정규화할 숫자 배열
         * @returns {number[]} - L1 Norm 정규화된 새 배열
         */
        function l1Normalize(array) {
            // 1. 배열 모든 요소의 절댓값의 합(L1 Norm)을 계산합니다.
            const l1Norm = array.reduce((accumulator, value) => accumulator + Math.abs(value), 0);

            // 2. L1 Norm이 0이면 0으로 나누는 오류를 방지하기 위해 원본 배열을 반환합니다.
            if (l1Norm === 0) {
                return array;
            }

            // 3. 각 요소를 L1 Norm으로 나누어 새로운 배열을 만듭니다.
            const normalizedArray = array.map(value => value / l1Norm);

            return normalizedArray;
        }

        const v = [0.040947933814355304, 0.07107415582452502, 0.06011108601731913, 0.01794227571891887, 0.0023668124673089813, 0.014079274875777108, 0.00563971937767097, 0.7424969289984021, 0.004393147961569152, 0.0046033903823367184, 0.003360927928172584, 0.004662719355630023, 0.0034439485212455372, 0.0036597249158408624, 0.06271346445594515, 0.01681124352450882, 0.004388037470302412, 0.024006145607147897, 0.012049196154943534, 0.0027347376619997832, 0.008249859591679913, 0.048203290307096074, 0.001602110602626843]
        const u = l1Normalize(v);
        const sumOfAbs = u.reduce((acc, value) => acc + Math.abs(value), 0);
        console.log(sumOfAbs);
        const keywords = [
            "afro", "ambient", "arab", "asian", "blues", "childrenJingle", "classical", 
            "electronicDance", "folkCountry", "funkSoul", "indian", "jazz", "latin", 
            "metal", "pop", "rapHipHop", "reggae", "rnb", "rock", "singerSongwriters", 
            "sound", "soundtrack", "spokenWord"
        ];

        const ctx = document.getElementById('vectorChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: keywords,
                datasets: [{
                    label: 'Vector v',
                    data: v,
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                }, {
                    label: 'Vector u (Normalized v)',
                    data: u,
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        min: 0,
                        max: 1
                    }
                }
            }
        });
    </script>
</body>
</html>