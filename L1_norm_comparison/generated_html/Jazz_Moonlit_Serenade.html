<!DOCTYPE html>
<html>
<head>
    <title>Vector Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1 style="font-family:Arial; text-align: center;">Jazz Moonlit Serenade</h1>
    <canvas id="vectorChart" width="400" height="200"></canvas>
    <script>
        /**
         * 주어진 배열을 L1 Norm으로 정규화합니다.
         * @param {number[]} array - 정규화할 숫자 배열
         * @returns {number[]} - L1 Norm 정규화된 새 배열
         */
        function l1Normalize(array) {
            // 1. 배열 모든 요소의 절댓값의 합(L1 Norm)을 계산합니다.
            const l1Norm = array.reduce((accumulator, value) => accumulator + Math.abs(value), 0);

            // 2. L1 Norm이 0이면 0으로 나누는 오류를 방지하기 위해 원본 배열을 반환합니다.
            if (l1Norm === 0) {
                return array;
            }

            // 3. 각 요소를 L1 Norm으로 나누어 새로운 배열을 만듭니다.
            const normalizedArray = array.map(value => value / l1Norm);

            return normalizedArray;
        }

        const v = [0.02909096938868364, 0.017411024340738854, 0.00763485257824262, 0.0018855262353705863, 0.01662803372212996, 0.03754216531912486, 0.011133457037309806, 0.0012940765688351046, 0.006695140207496782, 0.026052629264692467, 0.001450952064866821, 0.7986499389012655, 0.03083539561678966, 0.000383019365472137, 0.013791244275247057, 0.0014824810185624906, 0.011538082966580987, 0.009122920564065377, 0.014489977868894737, 0.033957372916241485, 0.005040805546256403, 0.04090519156306982, 0.0007197644396607453]
        const u = l1Normalize(v);
        const sumOfAbs = u.reduce((acc, value) => acc + Math.abs(value), 0);
        console.log(sumOfAbs);
        const keywords = [
            "afro", "ambient", "arab", "asian", "blues", "childrenJingle", "classical", 
            "electronicDance", "folkCountry", "funkSoul", "indian", "jazz", "latin", 
            "metal", "pop", "rapHipHop", "reggae", "rnb", "rock", "singerSongwriters", 
            "sound", "soundtrack", "spokenWord"
        ];

        const ctx = document.getElementById('vectorChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: keywords,
                datasets: [{
                    label: 'Vector v',
                    data: v,
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                }, {
                    label: 'Vector u (Normalized v)',
                    data: u,
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        min: 0,
                        max: 1
                    }
                }
            }
        });
    </script>
</body>
</html>