<!DOCTYPE html>
<html>
<head>
    <title>Vector Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1 style="font-family:Arial; text-align: center;">Sunset Serenade</h1>
    <canvas id="vectorChart" width="400" height="200"></canvas>
    <script>
        /**
         * 주어진 배열을 L1 Norm으로 정규화합니다.
         * @param {number[]} array - 정규화할 숫자 배열
         * @returns {number[]} - L1 Norm 정규화된 새 배열
         */
        function l1Normalize(array) {
            // 1. 배열 모든 요소의 절댓값의 합(L1 Norm)을 계산합니다.
            const l1Norm = array.reduce((accumulator, value) => accumulator + Math.abs(value), 0);

            // 2. L1 Norm이 0이면 0으로 나누는 오류를 방지하기 위해 원본 배열을 반환합니다.
            if (l1Norm === 0) {
                return array;
            }

            // 3. 각 요소를 L1 Norm으로 나누어 새로운 배열을 만듭니다.
            const normalizedArray = array.map(value => value / l1Norm);

            return normalizedArray;
        }

        const v = [0.023841683655822028, 0.026358779267563175, 0.006991432310314849, 0.009136916371062398, 0.019793973149110872, 0.12968262797221541, 0.018957788008265197, 0.003865931328618899, 0.0036623221434031925, 0.017188397352583706, 0.0028680364727430665, 0.2885460378602147, 0.0625849428276221, 0.018331039012991823, 0.03337425785139203, 0.006663235748419538, 0.006139020435512066, 0.03061174717731774, 0.03138235719719281, 0.01851160249983271, 0.014647066403995268, 0.05871817275571326, 0.004457887245128707]
        const u = l1Normalize(v);
        const sumOfAbs = u.reduce((acc, value) => acc + Math.abs(value), 0);
        console.log(sumOfAbs);
        const keywords = [
            "afro", "ambient", "arab", "asian", "blues", "childrenJingle", "classical", 
            "electronicDance", "folkCountry", "funkSoul", "indian", "jazz", "latin", 
            "metal", "pop", "rapHipHop", "reggae", "rnb", "rock", "singerSongwriters", 
            "sound", "soundtrack", "spokenWord"
        ];

        const ctx = document.getElementById('vectorChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: keywords,
                datasets: [{
                    label: 'Vector v',
                    data: v,
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                }, {
                    label: 'Vector u (Normalized v)',
                    data: u,
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        min: 0,
                        max: 1
                    }
                }
            }
        });
    </script>
</body>
</html>